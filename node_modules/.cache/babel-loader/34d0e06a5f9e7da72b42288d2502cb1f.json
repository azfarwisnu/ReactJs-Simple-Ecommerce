{"ast":null,"code":"var _jsxFileName = \"/home/abdulmuiz/js/react/jc-online-emmerce/src/pages/ProductDetail.jsx\";\nimport React from \"react\";\nimport Axios from 'axios';\nimport { API_URL } from '../constants/API';\nimport { connect } from 'react-redux';\nimport { getCartData } from '../redux/actions/cart';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass ProductDetail extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      productData: {},\n      productNotFound: false,\n      quantity: 1\n    };\n\n    this.fetchProductData = () => {\n      // alert(this.props.match.params.productId)\n      Axios.get(`${API_URL}/products`, {\n        params: {\n          id: this.props.match.params.productId\n        }\n      }).then(result => {\n        if (result.data.length) {\n          this.setState({\n            productData: result.data[0]\n          });\n        } else {\n          this.setState({\n            productNotFound: true\n          });\n        }\n      }).catch(() => {\n        alert(\"Terjadi kesalahan di server\");\n      });\n    };\n\n    this.qtyBtnHandler = action => {\n      if (action === \"increment\") {\n        this.setState({\n          quantity: this.state.quantity + 1\n        });\n      } else if (action === \"decrement\" && this.state.quantity > 1) {\n        this.setState({\n          quantity: this.state.quantity - 1\n        });\n      }\n    };\n\n    this.addToCartHandler = () => {\n      // Check apakah user sudah memiliki barang tsb di cart\n      Axios.get(`${API_URL}/carts`, {\n        params: {\n          userId: this.props.userGlobal.id,\n          productId: this.state.productData.id\n        }\n      }).then(result => {\n        if (result.data.length) {\n          // Barangnya sudah ada di cart user\n          Axios.patch(`${API_URL}/carts/${result.data[0].id}`, {\n            quantity: result.data[0].quantity + this.state.quantity\n          }).then(() => {\n            alert(\"Berhasil menambahkan barang\");\n            this.props.getCartData(this.props.userGlobal.id);\n          }).catch(() => {\n            alert(\"Terjadi kesalahan di server\");\n          });\n        } else {\n          // Barangnya belum ada di cart user\n          Axios.post(`${API_URL}/carts`, {\n            userId: this.props.userGlobal.id,\n            productId: this.state.productData.id,\n            price: this.state.productData.price,\n            productName: this.state.productData.productName,\n            productImage: this.state.productData.productImage,\n            quantity: this.state.quantity\n          }).then(() => {\n            alert(\"Berhasil menambahkan barang\");\n            this.props.getCartData(this.props.userGlobal.id);\n          }).catch(() => {\n            alert(\"Terjadi kesalahan di server\");\n          });\n        }\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.fetchProductData();\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: this.state.productNotFound ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"alert alert-warning mt-3\",\n        children: [\"Product with ID \", this.props.match.params.productId, \" has not been found\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row mt-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-6\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            style: {\n              width: \"100%\"\n            },\n            src: this.state.productData.productImage,\n            alt: \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-6 d-flex flex-column justify-content-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            children: this.state.productData.productName\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n            children: [\"Rp \", this.state.productData.price]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: this.state.productData.description\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"d-flex flex-row align-items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => this.qtyBtnHandler(\"decrement\"),\n              className: \"btn btn-primary mr-4\",\n              children: \"-\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 108,\n              columnNumber: 17\n            }, this), this.state.quantity, /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => this.qtyBtnHandler(\"increment\"),\n              className: \"btn btn-primary mx-4\",\n              children: \"+\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 112,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: this.addToCartHandler,\n            className: \"btn btn-success mt-3\",\n            children: \"Add to cart\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    userGlobal: state.user\n  };\n};\n\nconst mapDispatchToProps = {\n  getCartData\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(ProductDetail);","map":{"version":3,"sources":["/home/abdulmuiz/js/react/jc-online-emmerce/src/pages/ProductDetail.jsx"],"names":["React","Axios","API_URL","connect","getCartData","ProductDetail","Component","state","productData","productNotFound","quantity","fetchProductData","get","params","id","props","match","productId","then","result","data","length","setState","catch","alert","qtyBtnHandler","action","addToCartHandler","userId","userGlobal","patch","post","price","productName","productImage","componentDidMount","render","width","description","mapStateToProps","user","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport Axios from 'axios'\nimport { API_URL } from '../constants/API'\nimport { connect } from 'react-redux';\nimport { getCartData } from '../redux/actions/cart'\n\nclass ProductDetail extends React.Component {\n  state = {\n    productData: {},\n    productNotFound: false,\n    quantity: 1,\n  }\n\n  fetchProductData = () => {\n    // alert(this.props.match.params.productId)\n    Axios.get(`${API_URL}/products`, {\n      params: {\n        id: this.props.match.params.productId\n      }\n    })\n    .then((result) => {\n      if (result.data.length) {\n        this.setState({ productData: result.data[0] })\n      } else {\n        this.setState({ productNotFound: true })\n      }\n    })\n    .catch(() => {\n      alert(\"Terjadi kesalahan di server\")\n    })\n  }\n\n  qtyBtnHandler = (action) => {\n    if (action === \"increment\") {\n      this.setState({ quantity: this.state.quantity + 1 })\n    } else if (action === \"decrement\" && this.state.quantity > 1) {\n      this.setState({ quantity: this.state.quantity - 1})\n    }\n  }\n\n  addToCartHandler = () => {\n    // Check apakah user sudah memiliki barang tsb di cart\n    Axios.get(`${API_URL}/carts`, {\n      params: {\n        userId: this.props.userGlobal.id,\n        productId: this.state.productData.id,\n      }\n    })\n    .then((result) => {\n      if (result.data.length) { // Barangnya sudah ada di cart user\n        Axios.patch(`${API_URL}/carts/${result.data[0].id}`, {\n          quantity: result.data[0].quantity + this.state.quantity\n        })\n        .then(() => {\n          alert(\"Berhasil menambahkan barang\")\n          this.props.getCartData(this.props.userGlobal.id)\n        })\n        .catch(() => {\n          alert(\"Terjadi kesalahan di server\")\n        })\n\n      } else { // Barangnya belum ada di cart user\n        Axios.post(`${API_URL}/carts`, {\n          userId: this.props.userGlobal.id,\n          productId: this.state.productData.id,\n          price: this.state.productData.price,\n          productName: this.state.productData.productName,\n          productImage: this.state.productData.productImage,\n          quantity: this.state.quantity,\n        })\n        .then(() => {\n          alert(\"Berhasil menambahkan barang\")\n          this.props.getCartData(this.props.userGlobal.id)\n        })\n        .catch(() => {\n          alert(\"Terjadi kesalahan di server\")\n        })\n      }\n    })\n  }\n\n  componentDidMount() {\n    this.fetchProductData()\n  }\n\n  render() {\n    return (\n      <div className=\"container\">\n        {\n          this.state.productNotFound ?\n          <div className=\"alert alert-warning mt-3\">Product with ID {this.props.match.params.productId} has not been found</div>\n          :\n          <div className=\"row mt-3\">\n            <div className=\"col-6\">\n              <img\n                style={{ width: \"100%\" }}\n                src={this.state.productData.productImage}\n                alt=\"\"\n              />\n            </div>\n            <div className=\"col-6 d-flex flex-column justify-content-center\">\n              <h4>{this.state.productData.productName}</h4>\n              <h5>Rp {this.state.productData.price}</h5>\n              <p>\n                {this.state.productData.description}\n              </p>\n              <div className=\"d-flex flex-row align-items-center\">\n                <button onClick={() => this.qtyBtnHandler(\"decrement\")} className=\"btn btn-primary mr-4\">\n                  -\n                </button>\n                {this.state.quantity}\n                <button onClick={() => this.qtyBtnHandler(\"increment\")} className=\"btn btn-primary mx-4\">\n                  +\n                </button>\n              </div>\n              <button onClick={this.addToCartHandler} className=\"btn btn-success mt-3\">\n                Add to cart\n              </button>\n            </div>\n          </div>\n        }\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    userGlobal: state.user,\n  }\n}\n\nconst mapDispatchToProps = {\n  getCartData,\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ProductDetail);\n"]},"metadata":{},"sourceType":"module"}